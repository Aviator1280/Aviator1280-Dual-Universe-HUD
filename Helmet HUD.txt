{"slots":{"0":{"name":"databank","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"--unit.start()\n local SoftwareVersion=\"v4.0.0\"\n databank.setStringValue(\"Helmet HUD ver\", SoftwareVersion)\n FPS=30--export\n hud_pos_x=system.getScreenWidth()\n hud_pos_y=system.getScreenHeight()\n\n hud_pos_x=(hud_pos_x/2)-251\n hud_pos_y=(hud_pos_y/2)-322\n\n --INITIALIZE LISTS\n  ai_hud_data={\n  speed=0,\n  altitude=0,\n  planet_Atmo_tick=0,\n  density=100,\n  roll=0,\n  pitch=0,\n  yaw_bird=0,\n  pitch_bird=0,\n  fpa=0,\n  compass=0,\n  ToWp=0,\n  wp_dist=0,\n  yaw_wp=0,\n  vs=0\n  }\n  ai_hud_data=serialize(ai_hud_data)\n  databank.setStringValue(\"ai_hud_data\", ai_hud_data)\n\n  spc_hud_data={\n  speed=0,\n  speedMS=0,\n  altitude=0,\n  GPlanet=\"\",\n  pitch_sp=0,\n  yaw_sp=0,\n  yaw_wp=0,\n  pitch_wp=0,\n  roll=0,\n  pitch=0,\n  gravity=1.0\n  }\n  spc_hud_data=serialize(spc_hud_data)\n  databank.setStringValue(\"spc_hud_data\", spc_hud_data)\n\n --INITIAL VARIABLE\n  hud_color=\"aqua\" --export\n  databank.setStringValue(\"hud_color\", hud_color)\n  g_color=hud_color\n  roll_hud=0\n  pitch_hud=0\n  yaw_bird_hud=0\n  compass_hud=0\n  pitch_bird_hud=0\n  speed_hud=0\n  speedMS=0\n  altitude=0\n  planet_Atmo_tick=0\n  fpa_hud=0\n  vs_hud=0\n  vs_svg=0\n  yaw_WP_hud=0\n  pitch_WP_hud=0\n  GPlanet=\"\"\n  wp_color=\"none\"\n  alt_hold_color=\"none\"\n  ToWp=\"\"\n  distance_to_wp=0\n  time_to_wp_hud=0\n  active_hud_mode=\"\"\n  ai_mode=false\n  spc_mode=false\n  orb_mode=false\n  dmg_mode=true\n\n --CSS\n  function helmet_hud()\n   local hud_css=[[\n   <style>\n   .hud_div {position:absolute;top:]].. hud_pos_y ..[[px;left:]].. hud_pos_x ..[[px;}\n   .lines {stroke:]].. hud_color ..[[;stroke-width:2;fill:none;}\n   .circle {stroke:]].. hud_color ..[[;stroke-width:1;fill:]].. hud_color ..[[;}\n   .pitch {font-family:arial;font-size:12px;stroke-width:0;fill:]].. hud_color ..[[;}\n   .text {font-family:arial;font-size:15px;stroke-width:0;fill:]].. hud_color ..[[;}\n   .wptext {font-family:arial;font-size:15px;stroke-width:0;fill:]].. wp_color ..[[;}\n   .wp {stroke:]].. wp_color ..[[;stroke-width:2;fill:none;}\n   .alt_hold {font-family:arial;font-size:15px;stroke-width:0;fill:]].. alt_hold_color ..[[;}\n   .g_effect {stroke:]].. g_color ..[[;stroke-width:2;fill:none;}\n   .g_text {font-family:arial;font-size:15px;stroke-width:0;fill:]].. g_color ..[[;}\n   </style>]]\n   return hud_css\n  end\n  hud=helmet_hud()\n\n --AI Mode\n  function ai_mode_hud()\n   if vs_hud>300 then vs_svg=240\n   elseif vs_hud<-300 then vs_svg=360\n   else vs_svg=300+(vs_hud/-5) end\n   local ai_mode_html=hud ..[[\n   <div class=\"hud_div\"><table>\n    <tr><td>\n    <svg width=\"500\" height=\"25\">\n     <g transform=\"translate(]].. yaw_WP_hud ..[[ 0)\">\n     <rect x=\"247.5\" y=\"15\" width=\"5\" height=\"10\" fill=\"]].. wp_color ..[[\"/>\n     </g>\n     <polyline class=\"lines\" points=\"250,15 245,0 255,0 250,15\" />\n     <g class=\"text\" transform=\"translate(]].. compass_hud ..[[ 0)\">\n     <text x=\"-200\" y=\"23\" text-anchor=\"middle\">340<tspan x=\"-100\">350</tspan>\n     <tspan x=\"0\">N</tspan>\n     <tspan x=\"100\">10</tspan>\n     <tspan x=\"200\">20</tspan>\n     <tspan x=\"300\">30</tspan>\n     <tspan x=\"400\">40</tspan>\n     <tspan x=\"500\">50</tspan>\n     <tspan x=\"600\">60</tspan>\n     <tspan x=\"700\">70</tspan>\n     <tspan x=\"800\">80</tspan>\n     <tspan x=\"900\">E</tspan>\n     <tspan x=\"1000\">100</tspan>\n     <tspan x=\"1100\">110</tspan>\n     <tspan x=\"1200\">120</tspan>\n     <tspan x=\"1300\">130</tspan>\n     <tspan x=\"1400\">140</tspan>\n     <tspan x=\"1500\">150</tspan>\n     <tspan x=\"1600\">160</tspan>\n     <tspan x=\"1700\">170</tspan>\n     <tspan x=\"1800\">S</tspan>\n     <tspan x=\"1900\">190</tspan>\n     <tspan x=\"2000\">200</tspan>\n     <tspan x=\"2100\">210</tspan>\n     <tspan x=\"2200\">220</tspan>\n     <tspan x=\"2300\">230</tspan>\n     <tspan x=\"2400\">240</tspan>\n     <tspan x=\"2500\">250</tspan>\n     <tspan x=\"2600\">260</tspan>\n     <tspan x=\"2700\">W</tspan>\n     <tspan x=\"2800\">280</tspan>\n     <tspan x=\"2900\">290</tspan>\n     <tspan x=\"3000\">300</tspan>\n     <tspan x=\"3100\">310</tspan>\n     <tspan x=\"3200\">320</tspan>\n     <tspan x=\"3300\">330</tspan>\n     <tspan x=\"3400\">340</tspan>\n     <tspan x=\"3500\">350</tspan>\n     <tspan x=\"3600\">N</tspan>\n     <tspan x=\"3700\">10</tspan>\n     <tspan x=\"3800\">20</tspan>\n     </text>\n     </g>\n    </svg>\n    </tr></td>\n    <tr><td>\n    <svg width=\"500\" height=\"600\">\n     <g class=\"lines\" transform=\"rotate(]].. -roll_hud ..[[,250,300) translate(0 ]].. pitch_hud ..[[)\">\n     <g class=\"pitch\">\n     <text x=\"110\" y=\"210\" text-anchor=\"start\">10\n     <tspan x=\"110\" y=\"110\">20</tspan>\n     <tspan x=\"110\" y=\"10\">30</tspan>\n     <tspan x=\"110\" y=\"-90\">40</tspan>\n     <tspan x=\"110\" y=\"-190\">50</tspan>\n     <tspan x=\"110\" y=\"-290\">60</tspan>\n     <tspan x=\"110\" y=\"-390\">70</tspan>\n     <tspan x=\"110\" y=\"-490\">80</tspan>\n     <tspan x=\"110\" y=\"-590\">90</tspan>\n     <tspan x=\"375\" y=\"210\">10</tspan>\n     <tspan x=\"375\" y=\"110\">20</tspan>\n     <tspan x=\"375\" y=\"10\">30</tspan>\n     <tspan x=\"375\" y=\"-90\">40</tspan>\n     <tspan x=\"375\" y=\"-190\">50</tspan>\n     <tspan x=\"375\" y=\"-290\">60</tspan>\n     <tspan x=\"375\" y=\"-390\">70</tspan>\n     <tspan x=\"375\" y=\"-490\">80</tspan>\n     <tspan x=\"375\" y=\"-590\">90</tspan>\n     </text>\n     </g>\n     <polyline points=\"229,-600 130,-600 130,-590\"/> -- +90L\n     <polyline points=\"271,-600 370,-600 370,-590\"/> -- +90R\n     <polyline points=\"229,-500 130,-500 130,-490\"/> -- +80L\n     <polyline points=\"271,-500 370,-500 370,-490\"/> -- +80R\n     <polyline points=\"229,-400 130,-400 130,-390\"/> -- +70L\n     <polyline points=\"271,-400 370,-400 370,-390\"/> -- +70R\n     <polyline points=\"229,-300 130,-300 130,-290\"/> -- +60L\n     <polyline points=\"271,-300 370,-300 370,-290\"/> -- +60R\n     <polyline points=\"229,-200 130,-200 130,-190\"/> -- +50L\n     <polyline points=\"271,-200 370,-200 370,-190\"/> -- +50R\n     <polyline points=\"229,-100 130,-100 130,-90\"/> -- +40L\n     <polyline points=\"271,-100 370,-100 370,-90\"/> -- +40R\n     <polyline points=\"229,0 130,0 130,10\"/> -- +30L\n     <polyline points=\"271,0 370,0 370,10\"/> -- +30R\n     <polyline points=\"229,100 130,100 130,110\"/> -- +20L\n     <polyline points=\"271,100 370,100 370,110\"/> -- +20R\n     <polyline points=\"229,200 130,200 130,210\"/> -- +10L\n     <polyline points=\"271,200 370,200 370,210\"/> -- +10R\n\n     <polyline points=\"229,300 100,300 100,310\"/> -- left terrein line\n     <polyline points=\"271,300 400,300 400,310\"/> -- right terrein line\n\n     <g class=\"pitch\">\n     <text x=\"110\" y=\"400\" text-anchor=\"start\">10\n     <tspan x=\"110\" y=\"500\">20</tspan>\n     <tspan x=\"110\" y=\"600\">30</tspan>\n     <tspan x=\"110\" y=\"700\">40</tspan>\n     <tspan x=\"110\" y=\"800\">50</tspan>\n     <tspan x=\"110\" y=\"900\">60</tspan>\n     <tspan x=\"110\" y=\"1000\">70</tspan>\n     <tspan x=\"110\" y=\"1100\">80</tspan>\n     <tspan x=\"110\" y=\"1200\">90</tspan>\n     <tspan x=\"375\" y=\"400\">10</tspan>\n     <tspan x=\"375\" y=\"500\">20</tspan>\n     <tspan x=\"375\" y=\"600\">30</tspan>\n     <tspan x=\"375\" y=\"700\">40</tspan>\n     <tspan x=\"375\" y=\"800\">50</tspan>\n     <tspan x=\"375\" y=\"900\">60</tspan>\n     <tspan x=\"375\" y=\"1000\">70</tspan>\n     <tspan x=\"375\" y=\"1100\">80</tspan>\n     <tspan x=\"375\" y=\"1200\">90</tspan>\n     </text>\n     </g>\n\n     <polyline points=\"229,400 130,400 130,380\" stroke-dasharray=\"10\"/> -- -10L\n     <polyline points=\"271,400 370,400 370,380\" stroke-dasharray=\"10\"/> -- -10R\n     <polyline points=\"229,500 130,500 130,480\" stroke-dasharray=\"10\"/> -- -20L\n     <polyline points=\"271,500 370,500 370,480\" stroke-dasharray=\"10\"/> -- -20R\n     <polyline points=\"229,600 130,600 130,580\" stroke-dasharray=\"10\"/> -- -30L\n     <polyline points=\"271,600 370,600 370,580\" stroke-dasharray=\"10\"/> -- -30R\n     <polyline points=\"229,700 130,700 130,680\" stroke-dasharray=\"10\"/> -- -40L\n     <polyline points=\"271,700 370,700 370,680\" stroke-dasharray=\"10\"/> -- -40R\n     <polyline points=\"229,800 130,800 130,780\" stroke-dasharray=\"10\"/> -- -50L\n     <polyline points=\"271,800 370,800 370,780\" stroke-dasharray=\"10\"/> -- -50R\n     <polyline points=\"229,900 130,900 130,880\" stroke-dasharray=\"10\"/> -- -60L\n     <polyline points=\"271,900 370,900 370,880\" stroke-dasharray=\"10\"/> -- -60R\n     <polyline points=\"229,1000 130,1000 130,980\" stroke-dasharray=\"10\"/> -- -700L\n     <polyline points=\"271,1000 370,1000 370,980\" stroke-dasharray=\"10\"/> -- -700R\n     <polyline points=\"229,1100 130,1100 130,1080\" stroke-dasharray=\"10\"/> -- -80L\n     <polyline points=\"271,1100 370,1100 370,1080\" stroke-dasharray=\"10\"/> -- -80R\n     <polyline points=\"229,1200 130,1200 130,1180\" stroke-dasharray=\"10\"/> -- -90L\n     <polyline points=\"271,1200 370,1200 370,1180\" stroke-dasharray=\"10\"/> -- -90R\n\n     <g class=\"lines\" transform=\"translate(]].. yaw_bird_hud ..\" \".. fpa_hud ..[[) rotate(]].. roll_hud ..[[,250,300)\"> --Bird\n      <circle cx=\"250\" cy=\"300\" r=\"5\" fill-opacity=\"0\"/> -- bird\n      <line x1=\"250\" y1=\"295\" x2=\"250\" y2=\"285\"/> -- bird tail\n      <line x1=\"245\" y1=\"300\" x2=\"230\" y2=\"300\"/> -- bird left wing\n      <line x1=\"255\" y1=\"300\" x2=\"270\" y2=\"300\"/> -- bird right wing\n     </g>\n\n     </g>\n\n     <g class=\"circle\"> --nose\n      <circle cx=\"250\" cy=\"300\" r=\"3\"/>\n     </g>\n\n     <g class=\"lines\"> --speed\n      <rect x=\"0\" y=\"50\" width=\"90\" height=\"25\"/>\n      <g class=\"text\">\n      <text text-anchor=\"middle\" x=\"45\" y=\"68\">]].. speed_hud ..[[</text><text text-anchor=\"left\" x=\"100\" y=\"68\">Km/h</text>\n     </g></g>\n\n     <g class=\"text\"> --atmo\n      <text text-anchor=\"end\" x=\"40\" y=\"150\">Atmo\n      <tspan text-anchor=\"start\" x=\"40\">]].. air_density ..[[&nbsp%</tspan>\n      <tspan text-anchor=\"end\" x=\"40\" y=\"180\">Atl</tspan>\n      <tspan text-anchor=\"start\" x=\"40\">]].. planet_Atmo_tick ..[[ m</tspan>\n      </text>\n     </g>\n\n     <g class=\"text\"> --alpha\n      <text text-anchor=\"end\" x=\"39\" y=\"210\">&alpha;\n      <tspan text-anchor=\"start\" x=\"40\">]].. (math.floor((pitch_bird_hud/10)*10)/10) ..[[</tspan>\n      </text>\n     </g>\n\n     <g class=\"text\"> --FPA\n      <text text-anchor=\"end\" x=\"39\" y=\"240\">FPA\n      <tspan text-anchor=\"start\" x=\"40\">]].. (-fpa_hud/10) ..[[</tspan>\n      </text>\n     </g>\n\n     <g class=\"lines\"> --altitude\n      <rect x=\"410\" y=\"50\" width=\"90\" height=\"25\"/>\n      <g class=\"text\">\n      <text text-anchor=\"left\" x=\"385\" y=\"68\">m</text>\n      <text text-anchor=\"middle\" x=\"455\" y=\"68\">]].. altitude ..[[</text>\n      </g></g>\n      <g class=\"alt_hold\">\n      <text text-anchor=\"middle\" x=\"455\" y=\"100\">ALT HOLD</text>\n     </g>\n\n     <g class=\"lines\"> --vs\n      <g class=\"text\">\n      <text text-anchor=\"start\" x=\"420\" y=\"220\">V/S\n      <tspan text-anchor=\"end\" x=\"500\">]].. vs_hud ..[[</tspan>\n      </text>\n      </g>\n\n     <line x1=\"440\" y1=\"240\" x2=\"425\" y2=\"240\"/> --300\n     <line x1=\"440\" y1=\"260\" x2=\"425\" y2=\"260\"/> --200\n     <line x1=\"440\" y1=\"280\" x2=\"425\" y2=\"280\"/> --100\n     <line x1=\"440\" y1=\"300\" x2=\"410\" y2=\"300\"/> --0\n     <line x1=\"440\" y1=\"320\" x2=\"425\" y2=\"320\"/> --100\n     <line x1=\"440\" y1=\"340\" x2=\"425\" y2=\"340\"/> --200\n     <line x1=\"440\" y1=\"360\" x2=\"425\" y2=\"360\"/> --300\n     <polyline points=\"500,300 445,]].. vs_svg ..[[ 425,]].. vs_svg ..[[\"/>\n     </g>\n\n     <g class=\"wptext\">     -- WPinfo\n      <rect class=\"wp\" x=\"3\" y=\"364\" width=\"50\" height=\"20\"/>\n      <text text-anchor=\"middle\" x=\"30\" y=\"380\">]].. wp_compass ..[[\n      <tspan text-anchor=\"start\" x=\"3\" y=\"400\">]].. ToWp ..[[\n      <tspan x=\"3\" y=\"420\">]].. distance_to_wp ..[[</tspan>\n      <tspan text-anchor=\"middle\" x=\"455\" y=\"420\">]].. time_to_wp_hud ..[[</tspan>\n      </text>\n     </g>\n\n    </svg>\n    </td></tr>\n   </table></div>]]\n   return ai_mode_html\n  end\n\n --SPC/ORB Mode\n  function spc_mode_hud()\n   local spc_mode_html=hud ..[[\n   <div class=\"hud_div\"><table class=\"tbl\">\n    <tr><td>\n    <svg width=\"500\" height=\"25\">\n     <g class=\"text\">\n     <text x=\"250\" y=\"23\" text-anchor=\"middle\">]].. active_hud_mode ..[[</text>\n     </g>\n    </svg>\n    </tr></td>\n\n    <tr><td>\n    <svg width=\"500\" height=\"600\">\n     <g class=\"lines\" transform=\"translate(]].. yaw_space_hud ..\" \".. pitch_space_hud ..[[)\">\n      <circle cx=\"250\" cy=\"300\" r=\"25\"/> -- 0 0\n      <line x1=\"225\" y1=\"300\" x2=\"275\" y2=\"300\"/>\n      <line x1=\"250\" y1=\"275\" x2=\"250\" y2=\"325\"/>\n      <circle cx=\"2050\" cy=\"300\" r=\"25\"/> -- 180 0\n      <circle cx=\"-1550\" cy=\"300\" r=\"25\"/> -- -180 0\n      <circle cx=\"250\" cy=\"-1500\" r=\"25\"/> -- 0 +180\n      <circle cx=\"250\" cy=\"2100\" r=\"25\"/> -- 0 -180\n      <circle cx=\"2050\" cy=\"2100\" r=\"25\"/> -- -180 -180\n      <circle cx=\"-1550\" cy=\"-1500\" r=\"25\"/> -- 180 180\n      <circle cx=\"2050\" cy=\"-1500\" r=\"25\"/> -- -180 180\n      <circle cx=\"-1550\" cy=\"2100\" r=\"25\"/> -- 180 -180\n\n      <rect x=\"-668\" y=\"282\" width=\"36\" height=\"36\"/> -- 90 0\n      <text class=\"text\" text-anchor=\"middle\" x=\"-650\" y=\"305\">-90</text>\n      <rect x=\"1132\" y=\"282\" width=\"36\" height=\"36\"/> -- -90 0\n      <text class=\"text\" text-anchor=\"middle\" x=\"1150\" y=\"305\">+90</text>\n      <rect x=\"-668\" y=\"2082\" width=\"36\" height=\"36\"/> -- 90 -180\n      <text class=\"text\" text-anchor=\"middle\" x=\"-650\" y=\"2105\">-90</text>\n      <rect x=\"1132\" y=\"-1518\" width=\"36\" height=\"36\"/> -- -90 180\n      <text class=\"text\" text-anchor=\"middle\" x=\"1150\" y=\"-1495\">+90</text>\n      <rect x=\"-668\" y=\"-1518\" width=\"36\" height=\"36\"/> -- 90 180\n      <text class=\"text\" text-anchor=\"middle\" x=\"-650\" y=\"-1495\">-90</text>\n      <rect x=\"1132\" y=\"2082\" width=\"36\" height=\"36\"/> -- -90 -180\n      <text class=\"text\" text-anchor=\"middle\" x=\"1150\" y=\"2105\">+90</text>\n\n      <polyline points=\"250,-625 275,-600 250,-575 225,-600 250,-625\"/> -- 0 +90\n      <polyline points=\"250,1175 275,1200 250,1225 225,1200 250,1175\"/> -- 0 -90\n      <polyline points=\"-1550,-625 -1525,-600 -1550,-575 -1575,-600 -1550,-625\"/> -- 180 90\n      <polyline points=\"2050,-625 2075,-600 2050,-575 2025,-600 2050,-625\"/> -- -180 90\n      <polyline points=\"2050,1175 2075,1200 2050,1225 2025,1200 2050,1175\"/> -- -180 -90\n      <polyline points=\"-1550,1175 -1525,1200 -1550,1225 -1575,1200 -1550,1175\"/> -- 180 -90\n     </g>\n\n     <g class=\"lines\" transform=\"rotate(]].. -roll_hud ..[[,250,300) translate(0 ]].. pitch_hud ..[[)\"> --Horizon\n      <polyline points=\"229,300 100,300 100,310\"/>\n      <polyline points=\"271,300 400,300 400,310\"/>\n     </g>\n\n     <g class=\"circle\"> -- nose\n      <circle cx=\"250\" cy=\"300\" r=\"3\"/>\n     </g>\n\n     <g class=\"lines\"> -- Velocity Vector\n      <line x1=\"250\" y1=\"300\" x2=\"]].. (250 + yaw_space_hud) ..[[\" y2=\"]].. (300 + pitch_space_hud) ..[[\"/>\n     </g>\n\n     <g class=\"lines\"> -- speed\n      <rect x=\"0\" y=\"50\" width=\"90\" height=\"25\"/>\n      <rect x=\"0\" y=\"75\" width=\"90\" height=\"25\"/>\n      <g class=\"text\">\n      <text text-anchor=\"middle\" x=\"45\" y=\"68\">]].. speed_hud ..[[</text><text text-anchor=\"left\" x=\"100\" y=\"68\">Km/h</text>\n      <text text-anchor=\"middle\" x=\"45\" y=\"93\">]].. speedMS ..[[</text><text text-anchor=\"left\" x=\"100\" y=\"93\">m/s</text>\n      </g>\n     </g>\n\n     <g class=\"g_text\"> -- gravity\n      <text text-anchor=\"start\" x=\"40\" y=\"180\">]].. GPlanet..[[\n      <tspan text-anchor=\"start\" x=\"40\" y=\"210\">G ]].. gravity ..[[</tspan>\n      </text>\n     </g>\n\n     <g class=\"lines\"> -- altitude\n      <rect x=\"410\" y=\"50\" width=\"90\" height=\"25\"/>\n      <g class=\"text\">\n      <text text-anchor=\"left\" x=\"385\" y=\"68\">m</text>\n      <text text-anchor=\"middle\" x=\"455\" y=\"68\">]].. altitude ..[[</text>\n      </g>\n     </g>\n\n     <g class=\"wp\"> -- WPinfo\n      <g transform=\"translate(]].. (yaw_WP_hud) ..\" \".. (pitch_WP_hud) ..[[)\">\n      <rect x=\"225\" y=\"275\" width=\"50\" height=\"50\"/> -- Destination\n      </g>\n     </g>\n\n     <g class=\"wp\">\n      <line x1=\"250\" y1=\"300\" x2=\"]].. (250 + yaw_WP_hud) ..[[\" y2=\"]].. (300 + pitch_WP_hud) ..[[\" stroke-dasharray=\"5\"/> -- Destination Vector\n     </g>\n\n    </svg>\n    </td></tr>\n   </table></div>]]\n   return spc_mode_html\n  end\n\n  system.showScreen(1)\n  unit.setTimer(\"hud_mode\", 1/FPS)\n--","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"},{"code":"--unit.tick(\"hud_mode\")\n helmet_mode=databank.getStringValue(\"helmet_mode\")\n if helmet_mode==\"spc\" then active_hud_mode=\"SPC Mode\"\n elseif helmet_mode==\"orb\" then active_hud_mode=\"ORB Mode\" end\n hud_color=databank.getStringValue(\"hud_color\")","filter":{"args":[{"value":"hud_mode"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"1"},{"code":"--unit.Stop()\n databank.setStringValue(\"helmet_mode\", \"off\")","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"2"},{"code":"--system.Update()\n if helmet_mode==\"ai\" then\n  local ai_hud_data=databank.getStringValue(\"ai_hud_data\")\n  ai_hud_data=deserialize(ai_hud_data)\n\n  roll_hud=ai_hud_data.roll\n  pitch_hud=ai_hud_data.pitch\n  if pitch_hud==nil then pitch_hud=0 end\n  yaw_bird_hud=ai_hud_data.yaw_bird\n  if yaw_bird_hud==nil then yaw_bird_hud=0 end\n  pitch_bird_hud=ai_hud_data.pitch_bird\n  if pitch_bird_hud==nil then pitch_bird_hud=0 end\n  fpa_hud=ai_hud_data.fpa\n  compass_hud=ai_hud_data.compass\n  speed_hud=ai_hud_data.speed\n  altitude=ai_hud_data.altitude\n  planet_Atmo_tick=ai_hud_data.planet_Atmo_tick\n  if planet_Atmo_tick==nil then planet_Atmo_tick=\"\" end\n  yaw_WP_hud=ai_hud_data.yaw_wp\n  if yaw_WP_hud==nil then yaw_WP_hud=0 end\n  air_density=ai_hud_data.density\n  vs_hud=ai_hud_data.vs\n\n  wp_compass=math.floor(compass_hud + yaw_WP_hud/10)\n\n  compass_hud=(-compass_hud)*10+250\n  if wp_compass>360 then wp_compass=wp_compass - 360\n  elseif wp_compass<0 then wp_compass=wp_compass + 360 end\n\n  wp_color=databank.getStringValue(\"wp_color\")\n  if wp_color==\"#00FFFF\" then\n   wp_color=hud_color\n   ToWp=ai_hud_data.ToWp\n   if ToWp==nil then ToWp=\"\" end\n   distance_to_wp=tonumber(ai_hud_data.wp_dist)\n   local Distance=distance_to_wp\n   if distance_to_wp>200 then distance_to_wp=math.floor((distance_to_wp/200)*100)/100 ..\" Su\"\n   else distance_to_wp=distance_to_wp ..\" Km\" end\n   if (speed_hud>50 and Distance~=nil) then\n    local ATA_h=Distance / speed_hud\n    local ATA_m=(ATA_h - math.floor(ATA_h))*60\n    local ATA_s=(ATA_m - math.floor(ATA_m))*60\n    time_to_wp_hud=math.floor(ATA_h) ..\":\".. math.floor(ATA_m) ..\":\".. math.floor(ATA_s)\n   else time_to_wp_hud=0 end\n  else time_to_wp_hud=0 end\n  alt_hold_color=databank.getStringValue(\"alt_hold_color\")\n  if alt_hold_color==\"lightgreen\" then alt_hold_color=hud_color end\n\n  hud=helmet_hud()\n  hud=hud..ai_mode_hud()\n  system.setScreen(hud)\n\n elseif (helmet_mode==\"spc\" or helmet_mode==\"orb\") then\n  local spc_hud_data=databank.getStringValue(\"spc_hud_data\")\n  spc_hud_data=deserialize(spc_hud_data)\n\n  gravity=spc_hud_data.gravity\n  g_color=hud_color\n  speed_hud=spc_hud_data.speed\n  speedMS=spc_hud_data.speedMS\n  if speedMS==nil then speedMS=\"\" end\n  GPlanet=spc_hud_data.GPlanet\n  if GPlanet==nil then GPlanet=\"\" end\n  altitude=spc_hud_data.altitude\n  pitch_space_hud=spc_hud_data.pitch_sp\n  if pitch_space_hud==nil then pitch_space_hud=0 end\n  yaw_space_hud=spc_hud_data.yaw_sp\n  if yaw_space_hud==nil then yaw_space_hud=0 end\n  yaw_WP_hud=spc_hud_data.yaw_wp\n  if yaw_WP_hud==nil then yaw_WP_hud=0 end\n  pitch_WP_hud=spc_hud_data.pitch_wp\n  if pitch_WP_hud==nil then pitch_WP_hud=0 end\n  roll_hud=spc_hud_data.roll\n  if roll_hud==nil then roll_hud=0 end\n  pitch_hud=spc_hud_data.pitch\n  if pitch_hud==nil then pitch_hud=0 end\n\n  wp_color=databank.getStringValue(\"wp_color\")\n  if wp_color==\"#00FFFF\" then wp_color=hud_color end\n\n  hud=helmet_hud()\n  hud=hud..spc_mode_hud()\n  system.setScreen(hud)\n else\n  hud=\"\"\n  system.setScreen(hud)\n end","filter":{"args":[],"signature":"update()","slotKey":"-2"},"key":"3"},{"code":"--library:\n local concat = table.concat\n local sFormat=string.format\n\n local function internalSerialize(v,tC,t)\n  local check = type(v)\n  local intSerial=internalSerialize\n  if check=='table' then\n   t[tC]='{'\n   local tempC=tC+1\n   if #v==0 then\n    for k,e in pairs(v) do\n     if type(k)~='number' then\n      t[tempC]=k\n      t[tempC+1]='='\n      tempC=tempC+2\n     else\n      t[tempC]='['\n      t[tempC+1]=k\n      t[tempC+2]=']='\n      tempC=tempC+3\n     end\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   else\n    for k,e in pairs(v) do\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   end\n   if tempC==(tC+1) then\n    t[tempC]='}'\n    return tempC+1\n   else\n    t[tempC-1]='}'\n    return tempC\n   end\n  elseif check=='string' then\n   t[tC]=sFormat(\"%q\",v)\n   return tC+1\n  elseif check=='number' then\n   t[tC]=tostring(v)\n   return tC+1\n  else\n   t[tC]=v and 'true' or 'false'\n   return tC+1\n  end\n  return tC\n end\n\n function serialize(v)\n  local t={}\n  local tC=1\n  local check = type(v)\n  local intSerial=internalSerialize\n  if check=='table' then\n   t[tC]='{'\n   tC=tC+1\n   local tempC=tC\n   if #v==0 then\n    for k,e in pairs(v) do\n     if type(k)~='number' then\n      t[tempC]=k\n      t[tempC+1]='='\n      tempC=tempC+2\n     else\n      t[tempC]='['\n      t[tempC+1]=k\n      t[tempC+2]=']='\n      tempC=tempC+3\n     end\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   else\n    for k,e in pairs(v) do\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   end\n   if tempC==tC then\n    t[tempC]='}'\n   else\n    t[tempC-1]='}'\n   end\n  elseif check=='string' then\n   t[tC]=sFormat(\"%q\",v)\n  elseif check=='number' then\n   t[tC]=tostring(v)\n  else\n   t[tC]=v and 'true' or 'false'\n  end\n\n  return concat(t)\n end\n\n function deserialize(s)\n  local f=load('t='..s)\n  f()\n  return t\n end\n\n local Code = [[return function()\n local concat = table.concat\n local sFormat=string.format\n\n local function internalSerialize(v,tC,t)\n  local check = type(v)\n  local intSerial=internalSerialize\n  if check=='table' then\n   t[tC]='{'\n   local tempC=tC+1\n   if #v==0 then\n    for k,e in pairs(v) do\n     if type(k)~='number' then\n      t[tempC]=k\n      t[tempC+1]='='\n      tempC=tempC+2\n     else\n      t[tempC]='['\n      t[tempC+1]=k\n      t[tempC+2]=']='\n      tempC=tempC+3\n     end\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   else\n    for k,e in pairs(v) do\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   end\n   if tempC==(tC+1) then\n    t[tempC]='}'\n    return tempC+1\n   else\n    t[tempC-1]='}'\n    return tempC\n   end\n  elseif check=='string' then\n   t[tC]=sFormat(\"%q\",v)\n   return tC+1\n  elseif check=='number' then\n   t[tC]=tostring(v)\n   return tC+1\n  else\n   t[tC]=v and 'true' or 'false'\n   return tC+1\n  end\n  return tC\n end\n\n function serialize(v)\n  local t={}\n  local tC=1\n  local check = type(v)\n  local intSerial=internalSerialize\n  if check=='table' then\n   t[tC]='{'\n   tC=tC+1\n   local tempC=tC\n   if #v==0 then\n    for k,e in pairs(v) do\n     if type(k)~='number' then\n      t[tempC]=k\n      t[tempC+1]='='\n      tempC=tempC+2\n     else\n      t[tempC]='['\n      t[tempC+1]=k\n      t[tempC+2]=']='\n      tempC=tempC+3\n     end\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   else\n    for k,e in pairs(v) do\n     tempC=intSerial(e,tempC,t)\n     t[tempC]=','\n     tempC=tempC+1\n    end\n   end\n   if tempC==tC then\n    t[tempC]='}'\n   else\n    t[tempC-1]='}'\n   end\n  elseif check=='string' then\n   t[tC]=sFormat(\"%q\",v)\n  elseif check=='number' then\n   t[tC]=tostring(v)\n  else\n   t[tC]=v and 'true' or 'false'\n  end\n\n  return concat(t)\n end\n\n function deserialize(s)\n  local f=load('t='..s)\n  f()\n  return t\n end\n end]]\n\n databank.setStringValue(\"Serialize\", Code)","filter":{"args":[],"signature":"start()","slotKey":"-3"},"key":"4"}],"methods":[],"events":[]}