{"slots":{"0":{"name":"databank","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"--unit.start()\n    --INITIAL VARIABLE\n        hud_color = \"aqua\" --export\n        databank.setStringValue(\"hud_color\", hud_color)\n        roll_hud = 0\n        pitch_hud = 0\n        yaw_bird_hud = 0\n        compass_hud = 0\n        pitch_bird_hud = 0\n        speed_hud = 0\n        altitude = 0\n        fpa_hud = 0\n        yaw_WP_hud = 0\n        pitch_WP_hud = 0\n        wp_color = \"none\"\n        alt_hold_color = \"none\"\n        distance_to_wp = 0\n        time_to_wp_hud = 0\n\n    --CSS\n        function helmet_hud()\n            local hud_css = [[\n                <style>\n                    .hud_div {position:absolute;top:20.5vh;left:36.95vw;}\n                    .tbl {border:0px solid ]]..hud_color..[[;}\n                    .lines {stroke:]]..hud_color..[[;stroke-width:2;fill:none;}\n                    .circle {stroke:]]..hud_color..[[;stroke-width:1;fill:]]..hud_color..[[;}\n                    .pitch {font-family:arial;font-size:12px;stroke-width:0;fill:]]..hud_color..[[;}\n                    .text {font-family:arial;font-size:15px;stroke-width:0;fill:]]..hud_color..[[;}\n                    .wptext {font-family:arial;font-size:15px;stroke-width:0;fill:]]..wp_color..[[;}\n                    .wp {stroke:]]..wp_color..[[;stroke-width:2;fill:none;}\n                    .alt_hold {font-family:arial;font-size:15px;stroke-width:0;fill:]]..alt_hold_color..[[;}\n                </style>]]\n            return hud_css\n        end\n        hud = helmet_hud()\n\n    --AI Mode\n        function ai_mode_hud()\n            local ai_mode_html = hud .. [[\n                <div class=\"hud_div\"><table class=\"tbl\">\n                    <tr><td>\n                    <svg width=\"500\" height=\"25\">\n                        <g transform=\"translate(]]..yaw_WP_hud..[[ 0)\">\n                        <rect x=\"247.5\" y=\"15\" width=\"5\" height=\"10\" fill=\"]]..wp_color..[[\"/>\n                        </g>\n                        <polyline class=\"lines\" points=\"250,15 245,0 255,0 250,15\" />\n                        <g class=\"text\" transform=\"translate(]]..compass_hud..[[ 0)\">\n                        <text x=\"-200\" y=\"23\" text-anchor=\"middle\">340<tspan x=\"-100\">350</tspan>\n                        <tspan x=\"0\">N</tspan>\n                        <tspan x=\"100\">10</tspan>\n                        <tspan x=\"200\">20</tspan>\n                        <tspan x=\"300\">30</tspan>\n                        <tspan x=\"400\">40</tspan>\n                        <tspan x=\"500\">50</tspan>\n                        <tspan x=\"600\">60</tspan>\n                        <tspan x=\"700\">70</tspan>\n                        <tspan x=\"800\">80</tspan>\n                        <tspan x=\"900\">E</tspan>\n                        <tspan x=\"1000\">100</tspan>\n                        <tspan x=\"1100\">110</tspan>\n                        <tspan x=\"1200\">120</tspan>\n                        <tspan x=\"1300\">130</tspan>\n                        <tspan x=\"1400\">140</tspan>\n                        <tspan x=\"1500\">150</tspan>\n                        <tspan x=\"1600\">160</tspan>\n                        <tspan x=\"1700\">170</tspan>\n                        <tspan x=\"1800\">S</tspan>\n                        <tspan x=\"1900\">190</tspan>\n                        <tspan x=\"2000\">200</tspan>\n                        <tspan x=\"2100\">210</tspan>\n                        <tspan x=\"2200\">220</tspan>\n                        <tspan x=\"2300\">230</tspan>\n                        <tspan x=\"2400\">240</tspan>\n                        <tspan x=\"2500\">250</tspan>\n                        <tspan x=\"2600\">260</tspan>\n                        <tspan x=\"2700\">W</tspan>\n                        <tspan x=\"2800\">280</tspan>\n                        <tspan x=\"2900\">290</tspan>\n                        <tspan x=\"3000\">300</tspan>\n                        <tspan x=\"3100\">310</tspan>\n                        <tspan x=\"3200\">320</tspan>\n                        <tspan x=\"3300\">330</tspan>\n                        <tspan x=\"3400\">340</tspan>\n                        <tspan x=\"3500\">350</tspan>\n                        <tspan x=\"3600\">N</tspan>\n                        <tspan x=\"3700\">10</tspan>\n                        <tspan x=\"3800\">20</tspan>\n                        </text>\n                        </g>\n                    </svg>\n                    </tr></td>\n                    <tr><td>\n                    <svg width=\"500\" height=\"600\">\n                    <g class=\"lines\" transform=\"rotate(]]..-roll_hud..[[,250,300) translate(0 ]]..pitch_hud..[[)\">\n                        <g class=\"pitch\">\n                        <text x=\"110\" y=\"210\" text-anchor=\"start\">10\n                        <tspan x=\"110\" y=\"110\">20</tspan>\n                        <tspan x=\"110\" y=\"10\">30</tspan>\n                        <tspan x=\"110\" y=\"-90\">40</tspan>\n                        <tspan x=\"110\" y=\"-190\">50</tspan>\n                        <tspan x=\"110\" y=\"-290\">60</tspan>\n                        <tspan x=\"110\" y=\"-390\">70</tspan>\n                        <tspan x=\"110\" y=\"-490\">80</tspan>\n                        <tspan x=\"110\" y=\"-590\">90</tspan>\n                        <tspan x=\"375\" y=\"210\">10</tspan>\n                        <tspan x=\"375\" y=\"110\">20</tspan>\n                        <tspan x=\"375\" y=\"10\">30</tspan>\n                        <tspan x=\"375\" y=\"-90\">40</tspan>\n                        <tspan x=\"375\" y=\"-190\">50</tspan>\n                        <tspan x=\"375\" y=\"-290\">60</tspan>\n                        <tspan x=\"375\" y=\"-390\">70</tspan>\n                        <tspan x=\"375\" y=\"-490\">80</tspan>\n                        <tspan x=\"375\" y=\"-590\">90</tspan>\n                        </text>\n                        </g>\n                        <polyline points=\"229,-600 130,-600 130,-590\"/> -- +90L\n                        <polyline points=\"271,-600 370,-600 370,-590\"/> -- +90R\n                        <polyline points=\"229,-500 130,-500 130,-490\"/> -- +80L\n                        <polyline points=\"271,-500 370,-500 370,-490\"/> -- +80R\n                        <polyline points=\"229,-400 130,-400 130,-390\"/> -- +70L\n                        <polyline points=\"271,-400 370,-400 370,-390\"/> -- +70R\n                        <polyline points=\"229,-300 130,-300 130,-290\"/> -- +60L\n                        <polyline points=\"271,-300 370,-300 370,-290\"/> -- +60R\n                        <polyline points=\"229,-200 130,-200 130,-190\"/> -- +50L\n                        <polyline points=\"271,-200 370,-200 370,-190\"/> -- +50R\n                        <polyline points=\"229,-100 130,-100 130,-90\"/> -- +40L\n                        <polyline points=\"271,-100 370,-100 370,-90\"/> -- +40R\n                        <polyline points=\"229,0 130,0 130,10\"/> -- +30L\n                        <polyline points=\"271,0 370,0 370,10\"/> -- +30R\n                        <polyline points=\"229,100 130,100 130,110\"/> -- +20L\n                        <polyline points=\"271,100 370,100 370,110\"/> -- +20R\n                        <polyline points=\"229,200 130,200 130,210\"/> -- +10L\n                        <polyline points=\"271,200 370,200 370,210\"/> -- +10R\n\n                        <polyline points=\"229,300 100,300 100,310\"/> -- left terrein line\n                        <polyline points=\"271,300 400,300 400,310\"/> -- right terrein line\n\n                        <g class=\"pitch\">\n                        <text x=\"110\" y=\"400\" text-anchor=\"start\">10\n                        <tspan x=\"110\" y=\"500\">20</tspan>\n                        <tspan x=\"110\" y=\"600\">30</tspan>\n                        <tspan x=\"110\" y=\"700\">40</tspan>\n                        <tspan x=\"110\" y=\"800\">50</tspan>\n                        <tspan x=\"110\" y=\"900\">60</tspan>\n                        <tspan x=\"110\" y=\"1000\">70</tspan>\n                        <tspan x=\"110\" y=\"1100\">80</tspan>\n                        <tspan x=\"110\" y=\"1200\">90</tspan>\n                        <tspan x=\"375\" y=\"400\">10</tspan>\n                        <tspan x=\"375\" y=\"500\">20</tspan>\n                        <tspan x=\"375\" y=\"600\">30</tspan>\n                        <tspan x=\"375\" y=\"700\">40</tspan>\n                        <tspan x=\"375\" y=\"800\">50</tspan>\n                        <tspan x=\"375\" y=\"900\">60</tspan>\n                        <tspan x=\"375\" y=\"1000\">70</tspan>\n                        <tspan x=\"375\" y=\"1100\">80</tspan>\n                        <tspan x=\"375\" y=\"1200\">90</tspan>\n                        </text>\n                        </g>\n\n                        <polyline points=\"229,400 130,400 130,380\" stroke-dasharray=\"10\"/> -- -10L\n                        <polyline points=\"271,400 370,400 370,380\" stroke-dasharray=\"10\"/> -- -10R\n                        <polyline points=\"229,500 130,500 130,480\" stroke-dasharray=\"10\"/> -- -20L\n                        <polyline points=\"271,500 370,500 370,480\" stroke-dasharray=\"10\"/> -- -20R\n                        <polyline points=\"229,600 130,600 130,580\" stroke-dasharray=\"10\"/> -- -30L\n                        <polyline points=\"271,600 370,600 370,580\" stroke-dasharray=\"10\"/> -- -30R\n                        <polyline points=\"229,700 130,700 130,680\" stroke-dasharray=\"10\"/> -- -40L\n                        <polyline points=\"271,700 370,700 370,680\" stroke-dasharray=\"10\"/> -- -40R\n                        <polyline points=\"229,800 130,800 130,780\" stroke-dasharray=\"10\"/> -- -50L\n                        <polyline points=\"271,800 370,800 370,780\" stroke-dasharray=\"10\"/> -- -50R\n                        <polyline points=\"229,900 130,900 130,880\" stroke-dasharray=\"10\"/> -- -60L\n                        <polyline points=\"271,900 370,900 370,880\" stroke-dasharray=\"10\"/> -- -60R\n                        <polyline points=\"229,1000 130,1000 130,980\" stroke-dasharray=\"10\"/> -- -700L\n                        <polyline points=\"271,1000 370,1000 370,980\" stroke-dasharray=\"10\"/> -- -700R\n                        <polyline points=\"229,1100 130,1100 130,1080\" stroke-dasharray=\"10\"/> -- -80L\n                        <polyline points=\"271,1100 370,1100 370,1080\" stroke-dasharray=\"10\"/> -- -80R\n                        <polyline points=\"229,1200 130,1200 130,1180\" stroke-dasharray=\"10\"/> -- -90L\n                        <polyline points=\"271,1200 370,1200 370,1180\" stroke-dasharray=\"10\"/> -- -90R\n\n                    <g class=\"lines\" transform=\"translate(]]..yaw_bird_hud..\" \"..fpa_hud..[[) rotate(]]..roll_hud..[[,250,300)\">    -- Bird\n                     <circle cx=\"250\" cy=\"300\" r=\"5\" fill-opacity=\"0\"/> -- bird\n                     <line x1=\"250\" y1=\"295\" x2=\"250\" y2=\"285\"/> -- bird tail\n                     <line x1=\"245\" y1=\"300\" x2=\"230\" y2=\"300\"/> -- bird left wing\n                     <line x1=\"255\" y1=\"300\" x2=\"270\" y2=\"300\"/> -- bird right wing\n                    </g>\n\n                    </g>\n\n                    <g class=\"circle\">                                  -- nose\n                     <circle cx=\"250\" cy=\"300\" r=\"3\"/>\n                    </g>\n\n                    <g class=\"lines\">                                   -- speed\n                     <rect x=\"0\" y=\"50\" width=\"90\" height=\"25\"/>\n                     <g class=\"text\">\n                     <text text-anchor=\"middle\" x=\"45\" y=\"68\">]]..speed_hud..[[</text>\n                    </g></g>\n\n                    <g class=\"text\">                                    -- alpha\n                     <text text-anchor=\"end\" x=\"35\" y=\"180\">&alpha;\n                     <tspan text-anchor=\"start\" x=\"40\">]]..(math.floor((pitch_bird_hud/10)*10)/10)..[[</tspan>\n                     </text>\n                    </g>\n\n                    <g class=\"text\">                                    -- FPA\n                     <text text-anchor=\"end\" x=\"35\" y=\"210\">FPA\n                     <tspan text-anchor=\"start\" x=\"40\">]]..(-fpa_hud/10)..[[</tspan>\n                     </text>\n                    </g>\n\n                    <g class=\"lines\">                                   -- altitude\n                     <rect x=\"410\" y=\"50\" width=\"90\" height=\"25\"/>\n                     <g class=\"text\">\n                     <text text-anchor=\"middle\" x=\"455\" y=\"68\">]]..altitude..[[</text>\n                     </g></g>\n                     <g class=\"alt_hold\">\n                     <text text-anchor=\"middle\" x=\"455\" y=\"100\">ALT HOLD</text>\n                    </g>\n\n                    <g class=\"wptext\">                                  -- WPinfo\n                     <rect class=\"lines\" x=\"3\" y=\"364\" width=\"50\" height=\"20\"/>\n                     <text text-anchor=\"middle\" x=\"30\" y=\"380\">]]..wp_compass..[[\n                     <tspan text-anchor=\"start\" x=\"15\" y=\"400\">WP\n                     <tspan x=\"15\" y=\"420\">]]..distance_to_wp..[[</tspan>\n                     <tspan text-anchor=\"middle\" x=\"455\" y=\"420\">]]..time_to_wp_hud..[[</tspan>\n                     </text>\n                    </g>\n\n                    </svg>\n                    </td></tr>\n                </table></div>]]\n            return ai_mode_html\n        end\n\n        system.showScreen(1)\n        unit.setTimer(\"hud_mode\", 1/3)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"},{"code":"--unit.tick(\"hud_mode\")\n    if databank.getStringValue(\"ai_mode\") == \"on\" then\n\tai_mode = true\n     spc_mode = false\n     orb_mode = false\n     dmg_mode = false\n    elseif databank.getStringValue(\"ai_mode\") == \"off\" then\n     ai_mode = false\n    elseif databank.getStringValue(\"spc_mode\") == \"on\" then\n     ai_mode = false\n     spc_mode = true\n     orb_mode = false\n     dmg_mode = false\n    elseif databank.getStringValue(\"spc_mode\") == \"off\" then\n     spc_mode = false\n    elseif databank.getStringValue(\"orb_mode\") == \"on\" then\n\tai_mode = false\n     spc_mode = false\n     orb_mode = true\n     dmg_mode = false\n    elseif databank.getStringValue(\"orb_mode\") == \"off\" then\n     orb_mode = false\n    elseif databank.getStringValue(\"dmg_mode\") == \"on\" then\n\tai_mode = false\n     spc_mode = false\n     orb_mode = false\n     dmg_mode = true\n    end\n\nhud_color = databank.getStringValue(\"hud_color\")","filter":{"args":[{"value":"hud_mode"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"1"},{"code":"--system.Update()\n    if ai_mode == true then\n        local hud_data = databank.getStringValue(\"hud_data\"):gsub(\"@@@\",\"\\\"\")\n        hud_data = json.decode(hud_data)\n\n        roll_hud = hud_data.roll\n        pitch_hud = hud_data.pitch\n        yaw_bird_hud = hud_data.yaw_bird\n        pitch_bird_hud = hud_data.pitch_bird\n        fpa_hud = hud_data.fpa\n        compass_hud = hud_data.compass\n        speed_hud = hud_data.speed\n        altitude = hud_data.altitude\n        yaw_WP_hud = hud_data.yaw_wp\n\n        wp_compass = math.floor(compass_hud + yaw_WP_hud/10)\n\n        compass_hud = (-compass_hud)*10+250\n        if wp_compass > 360 then\n            wp_compass = wp_compass - 360\n        elseif wp_compass < 0 then\n            wp_compass = wp_compass + 360\n        end\n\n        wp_color = databank.getStringValue(\"wp_color\")\n        if wp_color == \"#00FFFF\" then\n            wp_color = hud_color\n            distance_to_wp = hud_data.wp_dist\n            if speed_hud > 50 then\n             local ATA_h = distance_to_wp / speed_hud\n             local ATA_m = (ATA_h - math.floor(ATA_h))*60\n             local ATA_s = (ATA_m - math.floor(ATA_m))*60\n             time_to_wp_hud = math.floor(ATA_h) ..\":\".. math.floor(ATA_m) ..\":\".. math.floor(ATA_s)\n            else\n             time_to_wp_hud = 0\n            end\n        else\n            time_to_wp_hud = 0\n        end\n        alt_hold_color = databank.getStringValue(\"alt_hold_color\")\n        if alt_hold_color == \"lightgreen\" then\n            alt_hold_color = hud_color\n        end\n\n        hud = helmet_hud()\n        hud = hud .. ai_mode_hud()\n    else\n        hud = \"\"\n    end\n\nsystem.setScreen(hud)","filter":{"args":[],"signature":"update()","slotKey":"-2"},"key":"2"}],"methods":[],"events":[]}